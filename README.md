<!--
*** Thanks for checking out the Best-README-Template. If you have a suggestion
*** that would make this better, please fork the repo and create a pull request
*** or simply open an issue with the tag "enhancement".
*** Thanks again! Now go create something AMAZING! :D
-->



<!-- PROJECT SHIELDS -->
<!--
*** I'm using markdown "reference style" links for readability.
*** Reference links are enclosed in brackets [ ] instead of parentheses ( ).
*** See the bottom of this document for the declaration of the reference variables
*** for contributors-url, forks-url, etc. This is an optional, concise syntax you may use.
*** https://www.markdownguide.org/basic-syntax/#reference-style-links

[![LinkedIn][linkedin-shield]][linkedin-url]
-->


<!-- PROJECT LOGO -->
<br />
<p align="center">
  <a href="https://github.com/othneildrew/Best-README-Template">
    <img src="https://github.com/othneildrew/Best-README-Template/raw/master/images/logo.png" alt="Logo" width="80" height="80">
  </a>

  <h3 align="center">FastApi Data Interface Demonstration</h3>

  <p align="center">
    Showcases many FastApi features and good coding practices.
    <br />
    <a href="#getting-started">How to Run</a>
    ·
    <a href="https://github.com/othneildrew/Best-README-Template/issues">Report Bug</a>
    ·
    <a href="https://github.com/othneildrew/Best-README-Template/issues">Request Feature</a>
  </p>
</p>



<!-- TABLE OF CONTENTS -->
<details open="open">
  <summary>Table of Contents</summary>
  <ol>
    <li>
      <a href="#about-the-project">About The Project</a>
      <ul>
        <li><a href="#built-with">Built With</a></li>
      </ul>
    </li>
    <li>
      <a href="#getting-started">Getting Started</a>
      <ul>
        <li><a href="#run-locally">Run Locally</a></li>
        <li><a href="#run-in-the-cloud">Run in the Cloud</a></li>
      </ul>
    </li>
    <li><a href="#future-improvements">Future Improvements</a></li>
  </ol>
</details>



<!-- ABOUT THE PROJECT -->
## About The Project


This project showcases many features and strengths of FastApi by exposing a REST Api for the "Netflix Movies and TV Shows" 
dataset, which can be found <a href="https://www.kaggle.com/shivamb/netflix-shows?select=netflix_titles.csv">here</a>.

The features that this project showcases include the following:

* An easy-to-read Api implementation which allows create, read, update, and delete operations on the Netflix Show data,
along with a Search operation that exposes comprehensive data searching, sorting, and filtering capabilities with only 
a short amount of powerful Python code.
* Integration with SQLAlchemy to interact with database backends both locally and in the cloud, using Alembic to handle
database migrations.
* Elegant code organization facilitated by FastApi's framework and its ability to utilize Pydantic Models.
* Easy deployment and validation via Docker, allowing CI tools like Cloud Build to automatically build images from code
committed to Github.
* Authentication implemented, with a token issuer endpoint (`/token`), and a clear demonstration of the OAuth2 and 
JWT Bearer token Authentication method. Note that Authorization could also be implemented using token scopes.
* Robust testing of the Api logical layer, demonstrating good code organization principles by utilizing modularized
code that can be atomically tested.
* Testing utilizes the <a href="https://hypothesis.readthedocs.io/en/latest/">Hypothesis</a> library along with the 
Pydantic models that FastApi uses for Api-layer data validation to automatically test the code with thousands of random
test cases and corner cases to search for implementation gaps or bugs.
* Automatic OpenApi, Swagger, and ReDoc Api documentation, generated by FastApi at the urls `/docs`, `/openapi.json`, 
and `/redoc` respectively.



### Built With

* [FastApi](https://fastapi.tiangolo.com/)
* [Pydantic](https://pydantic-docs.helpmanual.io/)
* [SQLAlchemy](https://www.sqlalchemy.org/)
* [Hypothesis](https://hypothesis.readthedocs.io/)



<!-- GETTING STARTED -->
## Getting Started


### Run Locally

0. Clone this repository
1. Install the requirements (`pip install -r requirements.txt`)
2. Run `main.py`, which will run via a local server on `localhost:5000`.

The following environment variables must be set to run locally:

* `sqlalchemy_database_url` (Can use SQLite)

* `auth_issuer_secret_key` (Used to sign the JWT Authentication token certificates)

* `auth_issuer_valid_username` (Username to accept which is allowed to generate a JWT token)

### Run in the Cloud

0. Build docker image: `docker build -t fastapiimage` (When run as a container, the server will run on port 80)
1. Deploy the docker image to your host of choice (instructions vary by host)

The following environment variables must be set to run via Docker:

* `auth_issuer_secret_key` (Used to sign the JWT Authentication token certificates)

* `auth_issuer_valid_username` (Username to accept which is allowed to generate a JWT token)

* `POSTGRES_USER`

* `POSTGRES_PASSWORD`

* `POSTGRES_SERVER`

* `POSTGRES_DB`

* `DB_SOCKET_DIR` (Only required if using Linux Sockets to connect to the DB. Defaults to `/cloudsql`)

* `CLOUD_SQL_CONNECTION_NAME` (Only required if using Linux Sockets to connect to the DB.)


Note: There are, of course, many other ways to run this application in production besides Docker.



## Future Improvements

* Read secrets from Secrets Manager instead of Env variables

* Github Badges with CI/CD integration

* GraphQL Search

* Api Integration Tests using Hypothesis for data generation (similarly to the Unit tests) and `httpx` to run the emulated server 







<!-- MARKDOWN LINKS & IMAGES -->
<!-- https://www.markdownguide.org/basic-syntax/#reference-style-links -->





